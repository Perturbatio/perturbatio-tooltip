YUI.add("perturbatio-tooltip",function(f){var d=f.Lang,c=f.Node,b=-10000,a=-10000;"use strict";var e=f.namespace("Perturbatio");e.Tooltip=f.Base.create("perturbatio-tooltip",f.Widget,[f.WidgetPosition,f.WidgetStack,f.WidgetPositionAlign,f.WidgetPositionConstrain],{initializer:function(g){var h=this;h._triggerClassName=h.getClassName("trigger");h._currTrigger={node:null,title:null,mouseX:e.Tooltip.OFFSCREEN_X,mouseY:e.Tooltip.OFFSCREEN_Y};h._eventHandles={delegate:null,trigger:{mouseMove:null,mouseOut:null}};h._timers={show:null,hide:null};h.publish("triggerEnter",{defaultFn:h._defTriggerEnterFn,preventable:true});h.publish("triggerLeave",{preventable:false})},destructor:function(){var g=this;g._clearCurrentTrigger();g._clearTimers();g._clearHandles()},bindUI:function(){var g=this;g.after("delegateChange",g._afterSetDelegate);g.after("nodesChange",g._afterSetNodes);g._bindDelegate()},syncUI:function(){var g=this;g._uiSetNodes(g.get("triggerNodes"))},setTriggerContent:function(k){var h=this.get("contentBox");h.set("innerHTML","");if(k){if(k instanceof c){for(var j=0,g=k.size();j<g;++j){h.appendChild(k.item(j))}}else{if(d.isString(k)){h.set("innerHTML",k)}}}},_afterSetNodes:function(g){this._uiSetNodes(g.newVal)},_afterSetDelegate:function(g){this._bindDelegate(g.newVal)},_uiSetNodes:function(g){var h=this;if(h._triggerNodes){h._triggerNodes.removeClass(h._triggerClassName)}if(g){h._triggerNodes=g;h._triggerNodes.addClass(h._triggerClassName)}},_bindDelegate:function(){var h=this,g=h._eventHandles;if(g.delegate){g.delegate.detach();g.delegate=null}g.delegate=f.delegate("mouseenter",f.bind(h._onNodeMouseEnter,h),h.get("delegate"),"."+h._triggerClassName)},_onNodeMouseEnter:function(i){var h=this,g=i.currentTarget;if(g&&(!h._currTrigger.node||!g.compareTo(h._currTrigger.node))){h._enterTrigger(g,i.pageX,i.pageY)}},_onNodeMouseLeave:function(g){this._leaveTrigger(g.currentTarget)},_onNodeMouseMove:function(g){this._overTrigger(g.pageX,g.pageY)},_enterTrigger:function(h,g,j){var i=this;i._setCurrentTrigger(h,g,j);i.fire("triggerEnter",{node:h,pageX:g,pageY:j})},_defTriggerEnterFn:function(j){var i=this,h=j.node;if(!i.get("disabled")){i._clearTimers();var g=(i.get("visible"))?0:i.get("showDelay");i._timers.show=f.later(g,i,i._showTooltip,[h])}},_leaveTrigger:function(g){var h=this;h.fire("triggerLeave");h._clearCurrentTrigger();h._clearTimers();h._timers.hide=f.later(h.get("hideDelay"),h,h._hideTooltip)},_overTrigger:function(g,i){var h=this;h._currTrigger.mouseX=g;h._currTrigger.mouseY=i},_showTooltip:function(k){var h,n,g,m,j,i,l=this;h=l._currTrigger.mouseX;n=l._currTrigger.mouseY;j=l.get("calcX");i=l.get("calcY");g=l.get("offsetX");m=l.get("offsetY");if(typeof g==="function"){g=g.apply(l,[k,h])}if(typeof m==="function"){m=m.apply(l,[k,n])}if(typeof j==="function"){h=j.apply(l,[k,h])}if(typeof i==="function"){n=i.apply(l,[k,n])}l.move(h+g,n+m);l.show();l._clearTimers();if(l.get("autoHide")){l._timers.hide=f.later(l.get("autoHideDelay"),l,l._hideTooltip)}},_hideTooltip:function(){this._clearTimers();this.hide()},_setTriggerContent:function(h){var g=this.get("content");if(g&&!(g instanceof c||d.isString(g))){g=g[h.get("id")]||h.getAttribute("title")}this.setTriggerContent(g)},_setCurrentTrigger:function(h,g,m){var i=this,j=i._currTrigger,l=i._eventHandles.trigger;i._setTriggerContent(h);l.mouseMove=f.on("mousemove",f.bind(i._onNodeMouseMove,i),h);l.mouseOut=f.on("mouseleave",f.bind(i._onNodeMouseLeave,i),h);var k=h.getAttribute("title");h.setAttribute("title","");j.mouseX=g;j.mouseY=m;j.node=h;j.title=k},_clearCurrentTrigger:function(){var g,k,h=this,i=h._currTrigger,j=h._eventHandles.trigger;if(i.node){g=i.node;k=i.title||"";i.node=null;i.title="";j.mouseMove.detach();j.mouseOut.detach();j.mouseMove=null;j.mouseOut=null;g.setAttribute("title",k)}},_clearTimers:function(){var g=this._timers;if(g.hide){g.hide.cancel();g.hide=null}if(g.show){g.show.cancel();g.show=null}},_clearHandles:function(){var g=this._eventHandles;if(g.delegate){this._eventHandles.delegate.detach()}if(g.trigger.mouseOut){g.trigger.mouseOut.detach()}if(g.trigger.mouseMove){g.trigger.mouseMove.detach()}}},{OFFSCREEN_X:b,OFFSCREEN_Y:a,ATTRS:{offsetX:{value:15},offsetY:{value:15},calcX:{value:null},calcY:{value:null},content:{value:null},triggerNodes:{value:null,setter:function(g){if(g&&d.isString(g)){g=c.all(g)}return g}},delegate:{value:null,setter:function(g){return f.one(g)||f.one("document")}},showDelay:{value:250},hideDelay:{value:10},autoHideDelay:{value:2000},autoHide:{value:true},visible:{value:false},xy:{value:[b,a]}}})},"1.0",{requires:["node","event","event-mouseenter","base-build","widget","widget-stack","widget-position","widget-position-align","widget-position-constrain"]});